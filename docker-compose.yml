# docker-compose.yml
version: '3.9'

services:
  # --- Backend do Modelo ---
  ollama:
      image: ollama/ollama
      container_name: ollama_server
      volumes:
        - ollama_data:/root/.ollama
        - ./ollama_config/entrypoint.sh:/entrypoint.sh
      ports:
        - "11434:11434"
      entrypoint: /entrypoint.sh      
      restart: unless-stopped
      networks:
        - llm_net

  # --- Frontend Streamlit ---
  streamlit-app:
      build: ./streamlit_app
      container_name: streamlit_gemma_ui
      ports:
        - "8501:8501"
      depends_on:
        - ollama
      restart: unless-stopped
      networks:
        - llm_net

volumes:
  ollama_data:

networks:
  llm_net:
    driver: bridge